# end-of-stream

A node module that calls a callback when a readable/writable/duplex stream has completed or failed.

	npm install end-of-stream

## Usage

Simply pass a stream and a callback to the `eos`.
<<<<<<< HEAD
Both legacy streams, streams2 and stream3 are supported.
=======
Both legacy streams and streams2 are supported.
>>>>>>> dc07eafd530fcbfedeafa7d14c1ae975b8ab35e7

``` js
var eos = require('end-of-stream');

eos(readableStream, function(err) {
<<<<<<< HEAD
  // this will be set to the stream instance
	if (err) return console.log('stream had an error or closed early');
	console.log('stream has ended', this === readableStream);
=======
	if (err) return console.log('stream had an error or closed early');
	console.log('stream has ended');
>>>>>>> dc07eafd530fcbfedeafa7d14c1ae975b8ab35e7
});

eos(writableStream, function(err) {
	if (err) return console.log('stream had an error or closed early');
<<<<<<< HEAD
	console.log('stream has finished', this === writableStream);
=======
	console.log('stream has finished');
>>>>>>> dc07eafd530fcbfedeafa7d14c1ae975b8ab35e7
});

eos(duplexStream, function(err) {
	if (err) return console.log('stream had an error or closed early');
<<<<<<< HEAD
	console.log('stream has ended and finished', this === duplexStream);
=======
	console.log('stream has ended and finished');
>>>>>>> dc07eafd530fcbfedeafa7d14c1ae975b8ab35e7
});

eos(duplexStream, {readable:false}, function(err) {
	if (err) return console.log('stream had an error or closed early');
<<<<<<< HEAD
	console.log('stream has finished but might still be readable');
=======
	console.log('stream has ended but might still be writable');
>>>>>>> dc07eafd530fcbfedeafa7d14c1ae975b8ab35e7
});

eos(duplexStream, {writable:false}, function(err) {
	if (err) return console.log('stream had an error or closed early');
<<<<<<< HEAD
	console.log('stream has ended but might still be writable');
=======
	console.log('stream has ended but might still be readable');
>>>>>>> dc07eafd530fcbfedeafa7d14c1ae975b8ab35e7
});

eos(readableStream, {error:false}, function(err) {
	// do not treat emit('error', err) as a end-of-stream
});
```

## License

<<<<<<< HEAD
MIT

## Related

`end-of-stream` is part of the [mississippi stream utility collection](https://github.com/maxogden/mississippi) which includes more useful stream modules similar to this one.
=======
MIT
>>>>>>> dc07eafd530fcbfedeafa7d14c1ae975b8ab35e7
